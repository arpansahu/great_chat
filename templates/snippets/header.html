{% load static %}
{% block stylesheets %}
<style>

</style>
{% endblock stylesheets %}
<!-- Navbar -->
<nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true">
  <div class="container-fluid py-1 px-3">
    <div class="navbar-brand">
      <a href="{% url 'home' %}">
        <img style="border-radius: 10px" src="{% static 'Great Chat.png' %}" alt="CALCULATOR logo" width="75" height="75">
      </a>
    </div>
    <div class="navbar-center">
      <h5 class="my-0 mx-3 font-weight-bolder">Great Chat</h5>
    </div>
    <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
      <div class="ms-md-auto pe-md-3 d-flex align-items-center justify-content-end">
        
        <div id="autocomplete" class="autocomplete" style="margin-right: 20px">
            <input class="autocomplete-input" name="user-email" id="user-email" value="{{ email }}" placeholder="Search User Via Email..."/>
            <ul class="autocomplete-result-list"></ul>
        </div>
        <ul class="navbar-nav">
          <li class="nav-item d-flex align-items-center">
            {% if request.user.is_admin %}
            <a href="/admin" style="margin-right: 20px;">Admin Panel</a>
            {% endif %}
            <a href="{% url 'account' %}" style="margin-right: 20px;"><i class="fa fa-user me-sm-1"></i></a>
            {% if request.user.is_authenticated %}
              <a href="{% url 'logout' %}" class="nav-link text-body font-weight-bold px-0">
                <span class="d-sm-inline d-none">Sign Out</span>
              </a>
            {% else %}
              <a href="{% url 'login' %}" class="nav-link text-body font-weight-bold px-0">
                <span class="d-sm-inline d-none">Sign In</span>
              </a>
            {% endif %}
          </li>
          <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
            <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
              <div class="sidenav-toggler-inner">
                <i class="sidenav-toggler-line"></i>
                <i class="sidenav-toggler-line"></i>
                <i class="sidenav-toggler-line"></i>
              </div>
            </a>
          </li>
          <li class="nav-item px-3 d-flex align-items-center">
            <!-- Additional items can be added here -->
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<!-- End Navbar -->

<!-- Specific JS goes HERE -->
{% block javascripts %}
<script src="{% static 'js/autocomplete.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
new Autocomplete('#autocomplete', {
      search: input => {
          const url = {% url 'user-search' %} + `?email=${input}`
          return new Promise(resolve => {
              fetch(url)
              .then(response => response.json())
              .then(data => {
                  resolve(data.data)
              })
          })
      }
    })
</script>

{% endblock javascripts %}
