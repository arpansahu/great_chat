{% extends 'base.html' %}
{% load static %}
{% block title %} School Chale Hum {% endblock title %}
{% load custom_tags %}
<!-- Specific CSS goes HERE -->
{% block stylesheets %}
<style>
    .fade-out {
        transition: opacity 0.5s ease-in-out; /* Fade-out effect */
        opacity: 0;
    }

    #chat_container {
        min-height: 53vh;
        max-height: 53vh; /* Reduced by an additional 20% */
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: black white; /* thumb color and track color */
        position: relative;
    }

    #chat_container::-webkit-scrollbar {
        width: 30px;
    }

    #chat_container::-webkit-scrollbar-track {
        background: white; /* Track color */
        border-radius: 20px; /* Match the outer div rounded-3 style */
    }

    #chat_container::-webkit-scrollbar-thumb {
        background-color: black; /* Scroll thumb color */
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.8); /* Glowing effect */
        border: 3px solid white; /* Matching the background */
    }

    #chat_container::-webkit-scrollbar-thumb:hover {
        background-color: #333; /* Slightly lighter on hover */
    }

    /* Add pseudo-elements for rounded effect */
    #chat_container::before, #chat_container::after {
        content: '';
        position: absolute;
        width: 12px;
        height: 12px;
        background: white;
        z-index: 2;
    }

    #chat_container::before {
        bottom: 0;
        left: 0;
        border-radius: 0 0 0 12px;
    }

    #chat_container::after {
        bottom: 0;
        right: 0;
        border-radius: 0 0 12px 0;
    }

    ul {
        list-style: none; /* Remove list bullets */
        padding: 0;
        margin: 0;
    }

    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
    }

    #online-icon {
        height: 10px;
        width: 10px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 8px;
    }
.contact-row {
    display: grid;
    grid-template-columns: 3rem 1fr auto;
    grid-template-rows: auto auto;
    gap: 0.5rem;
    align-items: center;
}

.profile-photo {
    grid-row: span 2;
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
    object-fit: cover;
}

.name {
    font-weight: bold;
}

.time {
    text-align: right;
    color: gray;
    font-size: 0.875rem;
}

.message {
    color: gray;
}

.message-count {
    background-color: green;
    color: white;
    border-radius: 50%;
    width: 1.5rem;
    height: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.875rem;
}

.input-group {
    display: flex;
    align-items: center;
    border: 1px solid #ced4da;
    border-radius: 0.25rem;
    overflow: hidden;
    margin-top: 1rem;
    background-color: white;
}

.input-group input {
    border: none;
    outline: none;
    flex-grow: 1;
    padding: 0.5rem;
    border-radius: 0.25rem 0 0 0.25rem;
}

.input-group button {
    background-color: transparent; /* Make button transparent */
    color: black; /* Black color for the icon */
    border: none;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 0 0.25rem 0.25rem 0;
}

.input-group button i {
    font-size: 1rem;
    color: black; /* Ensure icon is black */
}

</style>
{% endblock stylesheets %}
{% block content %}
<div class="container-fluid py-4">
  <div class="row justify-content-center">
    <div class="col-12 col-md-6 col-lg-4">
      <div class="card mb-4" style="border-radius: 12px 12px 0 0;">
        <div class="row text-center rounded-3" style="margin: 20px">
            <ul>
                <li class="nav-item">
                    <a class="btn btn-block btn-social btn-github" href="https://github.com/arpansahu/great_chat">
                        <span style="margin-right: 10px"></span> Contacts Chats
                    </a>
                    <a class="btn btn-block btn-social btn-github" href="https://github.com/arpansahu">
                        <span style="margin-right: 10px"></span> Group Chats
                    </a>
                    <a id="global_chat" class="btn btn-block btn-social btn-github" href="{% url 'chat' %}">
                        <span style="margin-right: 10px"></span> Global Chat
                    </a>
                </li>
            </ul>
        </div>
        <div id='chat_container' class="overflow-y-auto grow rounded-3">
            <ul id="whatsapp-contacts" class="flex flex-col gap-4 p-4">
                <!-- Contact 1 -->
                <li class="contact-row border-b p-2">
                    <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="Profile 1" class="profile-photo">
                    <p class="name">Contact Name 1</p>
                    <p class="time">12:30 PM</p>
                    <p class="message">Last message from contact 1</p>
                    <div class="message-count">3</div>
                </li>
        
                <!-- Contact 2 -->
                <li class="contact-row border-b p-2">
                    <img src="https://randomuser.me/api/portraits/women/2.jpg" alt="Profile 2" class="profile-photo">
                    <p class="name">Contact Name 2</p>
                    <p class="time">11:45 AM</p>
                    <p class="message">Last message from contact 2</p>
                    <div class="message-count">1</div>
                </li>
        
                <!-- Contact 3 -->
                <li class="contact-row border-b p-2">
                    <img src="https://randomuser.me/api/portraits/men/3.jpg" alt="Profile 3" class="profile-photo">
                    <p class="name">Contact Name 3</p>
                    <p class="time">10:15 AM</p>
                    <p class="message">Last message from contact 3</p>
                    <div class="message-count">5</div>
                </li>
        
                <!-- Contact 4 -->
                <li class="contact-row border-b p-2">
                    <img src="https://randomuser.me/api/portraits/women/4.jpg" alt="Profile 4" class="profile-photo">
                    <p class="name">Contact Name 4</p>
                    <p class="time">9:00 AM</p>
                    <p class="message">Last message from contact 4</p>
                    <div class="message-count">2</div>
                </li>
        
                <!-- Contact 5 -->
                <li class="contact-row border-b p-2">
                    <img src="https://randomuser.me/api/portraits/men/5.jpg" alt="Profile 5" class="profile-photo">
                    <p class="name">Contact Name 5</p>
                    <p class="time">8:30 AM</p>
                    <p class="message">Last message from contact 5</p>
                    <div class="message-count">4</div>
                </li>
            </ul>
        </div>
        <div class="input-group">
            <input type="text" name="body" placeholder="Add a message ..." class="form-control" maxlength="300" autofocus="True" required="" id="id_body" aria-label="Message input">
            <button type="submit" class="search-button" aria-label="Search">
                <i class="fa fa-search" aria-hidden="true"></i>
            </button>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
<!-- Specific JS goes HERE -->
{% block javascripts %}

<script>
    // Function to scroll to the bottom of the chat container
    function scrollToBottom() {
        var chatContainer = document.getElementById('chat_container');
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Scroll to bottom on page load
    document.addEventListener('DOMContentLoaded', function() {
        scrollToBottom();
    });
</script>
{% endblock javascripts %}